sistema-leilao/
â”‚
â”œâ”€â”€ app.py                          # AplicaÃ§Ã£o Flask principal
â”‚
â”œâ”€â”€ lambdas/
â”‚   â”œâ”€â”€ lambda_processador.py      # Lambda 1: Processa lances da fila
â”‚   â””â”€â”€ lambda_finalizador.py      # Lambda 2: Finaliza leilÃµes expirados
â”‚
â”œâ”€â”€ data/                           # Armazenamento JSON
â”‚   â”œâ”€â”€ usuarios.json               # Dados dos usuÃ¡rios
â”‚   â”œâ”€â”€ leiloes.json                # Dados dos leilÃµes
â”‚   â”œâ”€â”€ lances.json                 # HistÃ³rico de lances
â”‚   â””â”€â”€ fila_sqs.json               # Simula fila SQS
â”‚
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ storage.py                  # FunÃ§Ãµes para ler/escrever JSON
â”‚   â””â”€â”€ validadores.py              # ValidaÃ§Ãµes de negÃ³cio
â”‚
â”œâ”€â”€ templates/                      # (Opcional) Templates HTML
â”‚   â””â”€â”€ index.html                  # Interface web simples
â”‚
â”œâ”€â”€ requirements.txt                # DependÃªncias do projeto
â”œâ”€â”€ README.md                       # DocumentaÃ§Ã£o do projeto
â””â”€â”€ .gitignore                      # Arquivos a ignorar no git


DESCRIÃ‡ÃƒO DOS ARQUIVOS:
========================

ğŸ“ app.py
- AplicaÃ§Ã£o Flask principal
- Endpoints REST: /usuarios, /leiloes, /lances
- Publica mensagens na fila SQS simulada

ğŸ“ lambdas/lambda_processador.py
- Consome mensagens da fila
- Valida regras de negÃ³cio (saldo, valor mÃ­nimo)
- Atualiza leilÃµes e lances

ğŸ“ lambdas/lambda_finalizador.py
- Executa periodicamente (pode ser chamado manualmente)
- Verifica leilÃµes com data_fim vencida
- Define vencedor e atualiza status

ğŸ“ data/*.json
- PersistÃªncia simples em JSON
- Inicializados com dados de exemplo

ğŸ“ utils/storage.py
- FunÃ§Ãµes reutilizÃ¡veis: ler_json(), escrever_json()
- Gerenciamento seguro de arquivos

ğŸ“ utils/validadores.py
- ValidaÃ§Ãµes: usuario_tem_saldo(), lance_valido()
- Regras de negÃ³cio centralizadas


ENDPOINTS DA API FLASK:
========================

GET  /usuarios                  - Lista todos os usuÃ¡rios
POST /usuarios                  - Cria novo usuÃ¡rio

GET  /leiloes                   - Lista todos os leilÃµes
POST /leiloes                   - Cria novo leilÃ£o
GET  /leiloes/<id>              - Detalhes de um leilÃ£o

POST /lances                    - Envia novo lance (vai para SQS)
GET  /lances/<leilao_id>        - Lista lances de um leilÃ£o

GET  /fila                      - Visualiza fila SQS (debug)


COMO EXECUTAR:
==============

1. Instalar dependÃªncias:
   pip install -r requirements.txt

2. Executar Flask:
   python app.py

3. Executar Lambda Processador (em outro terminal):
   python lambdas/lambda_processador.py

4. Executar Lambda Finalizador (em outro terminal ou agendar):
   python lambdas/lambda_finalizador.py


FLUXO DE DADOS:
===============

1. UsuÃ¡rio faz POST /lances â†’ Flask valida bÃ¡sico â†’ Adiciona na fila_sqs.json
2. lambda_processador.py consome fila â†’ Processa lance â†’ Atualiza lances.json e leiloes.json
3. lambda_finalizador.py roda periodicamente â†’ Verifica leilÃµes expirados â†’ Define vencedor